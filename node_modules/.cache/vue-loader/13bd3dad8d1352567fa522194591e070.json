{"remainingRequest":"D:\\VsCodepratice\\lowcodedaima\\ainiake\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\VsCodepratice\\lowcodedaima\\ainiake\\src\\components\\MainEditorArea\\dragArea.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\VsCodepratice\\lowcodedaima\\ainiake\\src\\components\\MainEditorArea\\dragArea.vue","mtime":1678610349490},{"path":"D:\\VsCodepratice\\lowcodedaima\\ainiake\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660470913585},{"path":"D:\\VsCodepratice\\lowcodedaima\\ainiake\\node_modules\\babel-loader\\lib\\index.js","mtime":1660470913399},{"path":"D:\\VsCodepratice\\lowcodedaima\\ainiake\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660470913585},{"path":"D:\\VsCodepratice\\lowcodedaima\\ainiake\\node_modules\\vue-loader\\lib\\index.js","mtime":1660470933396}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7DQppbXBvcnQgVnVlRHJhZ2dhYmxlUmVzaXphYmxlIGZyb20gJ3Z1ZS1kcmFnZ2FibGUtcmVzaXphYmxlJzsNCmltcG9ydCAndnVlLWRyYWdnYWJsZS1yZXNpemFibGUvZGlzdC9WdWVEcmFnZ2FibGVSZXNpemFibGUuY3NzJzsNCi8vIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvZXh0ZW5zaW9ucw0KaW1wb3J0IE15Q29tcG9uZW50cyBmcm9tICcuL2VkaXRvckNvbXBvbmVudC9jb21wb2VudHMnOw0KaW1wb3J0IFJpZ2h0QmFyIGZyb20gJy4uL3JpZ2h0QmFyLnZ1ZSc7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgcHJvcHM6IHsNCiAgICBzY2FsZU51bTogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgcmVxdWlyZTogZmFsc2UsDQogICAgfSwNCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIFZ1ZURyYWdnYWJsZVJlc2l6YWJsZSwNCiAgICBSaWdodEJhciwNCiAgICAuLi5NeUNvbXBvbmVudHMsDQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyhbJ2VkaXRvckxheW91dCddKSwNCiAgICBzY2FsZVN0eWxlKCkgew0KICAgICAgcmV0dXJuIGANCiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgke3RoaXMuc2NhbGVOdW19KTsNCiAgICAgICAgbGVmdDogJHt0aGlzLnNjYWxlTnVtIDwgMC41ID8gYCR7MjAwICogKDIgLSB0aGlzLnNjYWxlTnVtKX1weGAgOiAnMTAwcHgnfTsNCiAgICAgICAgdG9wOiAke3RoaXMuc2NhbGVOdW0gPCAwLjUgPyBgJHsxMDAgKiAoMiAtIHRoaXMuc2NhbGVOdW0pfXB4YCA6ICcxMDBweCd9Ow0KICAgICAgYDsNCiAgICB9LA0KICAgIHJpZ2h0Q29udGV4dFN0eWxlKCkgew0KICAgICAgY29uc3QgeyBsb2NhdGlvbiB9ID0gdGhpcy5yaWdodENvbnRleHRDb25maWc7DQogICAgICByZXR1cm4gew0KICAgICAgICBsZWZ0OiBgJHtsb2NhdGlvbi54fXB4YCwNCiAgICAgICAgdG9wOiBgJHtsb2NhdGlvbi55fXB4YCwNCiAgICAgIH07DQogICAgfSwNCiAgICBkcmFnQXJlYU91dFN0eWxlKCkgew0KICAgICAgY29uc3QgbGVmdCA9IHRoaXMuc2NhbGVOdW0gPCAwLjUgPyBgJHszMDAgKiAoMSAtIHRoaXMuc2NhbGVOdW0pfWAgOiAxMDA7DQogICAgICBjb25zdCB0b3AgPSB0aGlzLnNjYWxlTnVtIDwgMC41ID8gYCR7MzQwICogKDEgLSB0aGlzLnNjYWxlTnVtKX1gIDogMTAwOw0KICAgICAgcmV0dXJuIGANCiAgICAgICAgd2lkdGg6ICR7dGhpcy5zY2FsZU51bSAqIDE5MjAgKyAyICogbGVmdH1weDsNCiAgICAgICAgaGVpZ2h0OiAke3RoaXMuc2NhbGVOdW0gKiAxMDgwICsgMiAqIHRvcH1weDsNCiAgICAgIGA7DQogICAgfSwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcmlnaHRDb250ZXh0Q29uZmlnOiB7DQogICAgICAgIHNob3dSaWdodENvbnRleHRJZDogJycsDQogICAgICAgIGxvY2F0aW9uOiB7DQogICAgICAgICAgeDogMCwNCiAgICAgICAgICB5OiAwLA0KICAgICAgICB9LA0KICAgICAgfSwNCiAgICAgIHNob3dSZWZyZW5jZUxpc3Q6IHsNCiAgICAgICAgeDogW10sDQogICAgICAgIHk6IFtdLA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuJHJlZnMuZHJhZ0FyZWEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gew0KICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsNCiAgICAgIGNvbnN0IGMgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyk7DQogICAgICBpZiAoYyA9PT0gJ2RyYWdBcmVhJykgew0KICAgICAgICB0aGlzLmVkaXRvckxheW91dC5mb3JFYWNoKChlbGVtZW50KSA9PiB7DQogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduDQogICAgICAgICAgZWxlbWVudC5hY3RpdmUgPSBmYWxzZTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhZGRDb21wb25lbnQoZSkgew0KICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoJ2NvbXBvbmVudElkJyk7DQogICAgICBjb25zdCB7IG9mZnNldFgsIG9mZnNldFkgfSA9IGU7DQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnaGFuZGxlQWRkQ29tcG9uZW50Jywgew0KICAgICAgICBjb21wb25lbnROYW1lLA0KICAgICAgICB4OiBvZmZzZXRYLA0KICAgICAgICB5OiBvZmZzZXRZLA0KICAgICAgfSk7DQogICAgICBjb25zb2xlLmxvZyhlZGl0b3JMYXlvdXQpDQogICAgfSwNCiAgICBvbkFjdGl2YXRlZChlKSB7DQogICAgICB0aGlzLmVkaXRvckxheW91dC5mb3JFYWNoKChlbGVtZW50KSA9PiB7DQogICAgICAgIGNvbnN0IHsgaWQgfSA9IGVsZW1lbnQ7DQogICAgICAgIGlmIChpZCA9PT0gZS5pZCkgew0KICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbg0KICAgICAgICAgIGVsZW1lbnQuYWN0aXZlID0gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24NCiAgICAgICAgICBlbGVtZW50LmFjdGl2ZSA9IGZhbHNlOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIGUuYWN0aXZlID0gdHJ1ZTsNCiAgICB9LA0KICAgIG9uRGVhY3RpdmF0ZWQoZSkgew0KICAgICAgY29uc29sZS5sb2coZSk7DQogICAgfSwNCiAgICBzdG9wRHJhZygpIHsNCiAgICAgIHRoaXMuc2hvd1JlZnJlbmNlTGlzdCA9IHsNCiAgICAgICAgeDogW10sDQogICAgICAgIHk6IFtdLA0KICAgICAgfTsNCiAgICB9LA0KICAgIGhhbmRsZURyYWcoZSwgeCwgeSkgew0KICAgICAgbGV0IGZpbmFsWCA9IHg7DQogICAgICBsZXQgZmluYWxZID0geTsNCiAgICAgIGNvbnN0IHNob3dYTGlzdCA9IFtdOw0KICAgICAgY29uc3Qgc2hvd1lMaXN0ID0gW107DQogICAgICBjb25zdCBnZXRSZWZyZW5jZUxpbmVzID0gKGl0ZW0pID0+IHsNCiAgICAgICAgbGV0IGN1clggPSBbXTsNCiAgICAgICAgbGV0IGN1clkgPSBbXTsNCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVkaXRvckxheW91dC5sZW5ndGg7IGkgKz0gMSkgew0KICAgICAgICAgIGlmIChpdGVtLmlkID09PSB0aGlzLmVkaXRvckxheW91dFtpXS5pZCkgew0KICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRpbnVlDQogICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICB9DQogICAgICAgICAgY29uc3Qgew0KICAgICAgICAgICAgeDogWCwgeTogWSwgd2lkdGgsIGhlaWdodCwNCiAgICAgICAgICB9ID0gdGhpcy5lZGl0b3JMYXlvdXRbaV07DQogICAgICAgICAgY3VyWCA9IGN1clguY29uY2F0KFgsIFggKyB3aWR0aCk7DQogICAgICAgICAgY3VyWSA9IGN1clkuY29uY2F0KFksIFkgKyBoZWlnaHQpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgeDogWzk2MCwgLi4uY3VyWF0sDQogICAgICAgICAgeTogWzU0MCwgLi4uY3VyWV0sDQogICAgICAgIH07DQogICAgICB9Ow0KICAgICAgY29uc3QgY3VycmVudFJlZnJlbmNlTGlzdCA9IGdldFJlZnJlbmNlTGluZXMoZSk7DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRSZWZyZW5jZUxpc3QueC5sZW5ndGg7IGkgKz0gMSkgew0KICAgICAgICBjb25zdCBjdXIgPSBjdXJyZW50UmVmcmVuY2VMaXN0LnhbaV07DQogICAgICAgIGlmIChmaW5hbFggPT09IGN1cikgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoTWF0aC5hYnMoZmluYWxYIC0gY3VyKSA8PSAzMCkgew0KICAgICAgICAgIC8vIGNvbnN0IGRvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke2UuaWR9YCk7DQogICAgICAgICAgLy8gY29uc29sZS5sb2coZG9tLnN0eWxlKTsNCiAgICAgICAgICAvLyBkb20uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke2N1cn1weCwgJHt5fXB4KWA7DQogICAgICAgICAgc2hvd1hMaXN0LnB1c2goY3VyKTsNCiAgICAgICAgICBmaW5hbFggPSBjdXI7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudFJlZnJlbmNlTGlzdC55Lmxlbmd0aDsgaSArPSAxKSB7DQogICAgICAgIGNvbnN0IGN1ciA9IGN1cnJlbnRSZWZyZW5jZUxpc3QueVtpXTsNCiAgICAgICAgaWYgKGZpbmFsWSA9PT0gY3VyKSB7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGlmIChNYXRoLmFicyhmaW5hbFkgLSBjdXIpIDw9IDMwKSB7DQogICAgICAgICAgc2hvd1lMaXN0LnB1c2goY3VyKTsNCiAgICAgICAgICBmaW5hbFkgPSBjdXI7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHRoaXMuc2hvd1JlZnJlbmNlTGlzdCA9IHsNCiAgICAgICAgeDogc2hvd1hMaXN0LA0KICAgICAgICB5OiBzaG93WUxpc3QsDQogICAgICB9Ow0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVkaXRvckxheW91dC5sZW5ndGg7IGkgKz0gMSkgew0KICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lZGl0b3JMYXlvdXRbaV07DQogICAgICAgIGNvbnN0IHsgaWQgfSA9IGVsZW1lbnQ7DQogICAgICAgIGlmIChpZCA9PT0gZS5pZCkgew0KICAgICAgICAgIGVsZW1lbnQueCA9IGZpbmFsWDsNCiAgICAgICAgICBlbGVtZW50LnkgPSBmaW5hbFk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZVJlc2l6ZShlLCB4LCB5LCB3LCBoKSB7DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZWRpdG9yTGF5b3V0Lmxlbmd0aDsgaSArPSAxKSB7DQogICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmVkaXRvckxheW91dFtpXTsNCiAgICAgICAgY29uc3QgeyBpZCB9ID0gZWxlbWVudDsNCiAgICAgICAgaWYgKGlkID09PSBlLmlkKSB7DQogICAgICAgICAgZWxlbWVudC54ID0geDsNCiAgICAgICAgICBlbGVtZW50LnkgPSB5Ow0KICAgICAgICAgIGVsZW1lbnQud2lkdGggPSB3Ow0KICAgICAgICAgIGVsZW1lbnQuaGVpZ2h0ID0gaDsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlU2hvd1JpZ2h0QmFyKGUsIGl0ZW0pIHsNCiAgICAgIGNvbnN0IHsgb2Zmc2V0WCwgb2Zmc2V0WSB9ID0gZTsNCiAgICAgIGNvbnN0IHsgaWQsIHgsIHkgfSA9IGl0ZW07DQogICAgICB0aGlzLnJpZ2h0Q29udGV4dENvbmZpZyA9IHsNCiAgICAgICAgc2hvd1JpZ2h0Q29udGV4dElkOiBpZCwNCiAgICAgICAgbG9jYXRpb246IHsNCiAgICAgICAgICB4OiBvZmZzZXRYICsgeCwNCiAgICAgICAgICB5OiBvZmZzZXRZICsgeSwNCiAgICAgICAgfSwNCiAgICAgIH07DQogICAgfSwNCiAgICBjbGVhckxpc3RlbmVyKCkgew0KICAgICAgdGhpcy5yaWdodENvbnRleHRDb25maWcuc2hvd1JpZ2h0Q29udGV4dElkID0gJyc7DQogICAgfSwNCiAgICBoYW5kbGVEZWxldGVDb21wb2VudCgpIHsNCiAgICAgIGNvbnN0IHsgc2hvd1JpZ2h0Q29udGV4dElkIH0gPSB0aGlzLnJpZ2h0Q29udGV4dENvbmZpZzsNCiAgICAgIGlmICghc2hvd1JpZ2h0Q29udGV4dElkKSB7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdoYW5kbGVEZWxldGVDb21wb2VudCcsIHsgaWQ6IHNob3dSaWdodENvbnRleHRJZCB9KTsNCiAgICAgIGlmICh0aGlzLmVkaXRvckxheW91dC5sZW5ndGggPiAwKSB7DQogICAgICAgIHRoaXMuZWRpdG9yTGF5b3V0W3RoaXMuZWRpdG9yTGF5b3V0Lmxlbmd0aCAtIDFdLmFjdGl2ZSA9IHRydWU7DQogICAgICB9DQogICAgfSwNCiAgICBoYW5kbGVDb3B5Q29tcG9lbnQoKSB7DQogICAgICBjb25zdCB7IHNob3dSaWdodENvbnRleHRJZCB9ID0gdGhpcy5yaWdodENvbnRleHRDb25maWc7DQogICAgICBpZiAoIXNob3dSaWdodENvbnRleHRJZCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnaGFuZGxlQ29weUNvbXBvZW50JywgeyBpZDogc2hvd1JpZ2h0Q29udGV4dElkIH0pOw0KICAgICAgaWYgKHRoaXMuZWRpdG9yTGF5b3V0Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgdGhpcy5lZGl0b3JMYXlvdXRbdGhpcy5lZGl0b3JMYXlvdXQubGVuZ3RoIC0gMV0uYWN0aXZlID0gdHJ1ZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZVRvcENvbXBvZW50KCkgew0KICAgICAgY29uc3QgeyBzaG93UmlnaHRDb250ZXh0SWQgfSA9IHRoaXMucmlnaHRDb250ZXh0Q29uZmlnOw0KICAgICAgaWYgKCFzaG93UmlnaHRDb250ZXh0SWQpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2hhbmRsZVRvcENvbXBvZW50JywgeyBpZDogc2hvd1JpZ2h0Q29udGV4dElkIH0pOw0KICAgIH0sDQogICAgaGFuZGxlQm90dG9tQ29tcG9lbnQoKSB7DQogICAgICBjb25zdCB7IHNob3dSaWdodENvbnRleHRJZCB9ID0gdGhpcy5yaWdodENvbnRleHRDb25maWc7DQogICAgICBpZiAoIXNob3dSaWdodENvbnRleHRJZCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnaGFuZGxlQm90dG9tQ29tcG9lbnQnLCB7IGlkOiBzaG93UmlnaHRDb250ZXh0SWQgfSk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["dragArea.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dragArea.vue","sourceRoot":"src/components/MainEditorArea","sourcesContent":["<template>\r\n    <div :style=\"dragAreaOutStyle\">\r\n      <div\r\n        ref=\"dragArea\"\r\n        class=\"dragArea\"\r\n        :style=\"scaleStyle\"\r\n        @dragover.prevent\r\n        @drop=\"(e) => addComponent(e)\"\r\n        @click=\"clearListener()\"\r\n      >\r\n        <vue-draggable-resizable\r\n          v-for=\"item in editorLayout\"\r\n          :id=\"item.id\"\r\n          :key=\"item.id\"\r\n          :x=\"item.x\"\r\n          :y=\"item.y\"\r\n          :w=\"item.width\"\r\n          :h=\"item.height\"\r\n          :parent=\"true\"\r\n          :active=\"item.active\"\r\n          :is-conflict-check=\"true\"\r\n          :prevent-deactivation=\"true\"\r\n          @activated=\"onActivated(item)\"\r\n          @deactivated=\"onDeactivated(item)\"\r\n          @resizing=\"(x, y, w, h) => handleResize(item, x, y, w, h)\"\r\n          @dragging=\"(x, y, w, h) => handleDrag(item, x, y, w, h)\"\r\n          @dragstop=\"stopDrag\"\r\n          class=\"resize-box-class\"\r\n          class-name-active=\"active\"\r\n        >\r\n          <div\r\n            style=\"width: 100%; height: 100%;\"\r\n            @click=\"clearListener()\"\r\n            @contextmenu.prevent=\"(e) => handleShowRightBar(e, item)\"\r\n          >\r\n            <component\r\n              :is=\"`c-${item.data.type}`\"\r\n              :data=\"item\"\r\n            >\r\n            </component>\r\n          </div>\r\n        </vue-draggable-resizable>\r\n        <right-bar\r\n          :right-context-config=\"rightContextConfig\"\r\n          :right-context-style=\"rightContextStyle\"\r\n          @handleDeleteCompoent=\"handleDeleteCompoent\"\r\n          @handleCopyCompoent=\"handleCopyCompoent\"\r\n          @handleTopCompoent=\"handleTopCompoent\"\r\n          @handleBottomCompoent=\"handleBottomCompoent\"\r\n        />\r\n        <div\r\n          v-for=\"item in showRefrenceList['x']\"\r\n          :key=\"item\"\r\n          class=\"vertical-refrence\"\r\n          :style=\"`left: ${item}px`\"\r\n        >\r\n        </div>\r\n        <div\r\n          v-for=\"item in showRefrenceList['y']\"\r\n          :key=\"item\"\r\n          class=\"horizontal-refrence\"\r\n          :style=\"`top: ${item}px`\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\nimport VueDraggableResizable from 'vue-draggable-resizable';\r\nimport 'vue-draggable-resizable/dist/VueDraggableResizable.css';\r\n// // eslint-disable-next-line import/extensions\r\nimport MyComponents from './editorComponent/compoents';\r\nimport RightBar from '../rightBar.vue';\r\n\r\nexport default {\r\n  props: {\r\n    scaleNum: {\r\n      type: Number,\r\n      require: false,\r\n    },\r\n  },\r\n  components: {\r\n    VueDraggableResizable,\r\n    RightBar,\r\n    ...MyComponents,\r\n  },\r\n  computed: {\r\n    ...mapGetters(['editorLayout']),\r\n    scaleStyle() {\r\n      return `\r\n        transform: scale(${this.scaleNum});\r\n        left: ${this.scaleNum < 0.5 ? `${200 * (2 - this.scaleNum)}px` : '100px'};\r\n        top: ${this.scaleNum < 0.5 ? `${100 * (2 - this.scaleNum)}px` : '100px'};\r\n      `;\r\n    },\r\n    rightContextStyle() {\r\n      const { location } = this.rightContextConfig;\r\n      return {\r\n        left: `${location.x}px`,\r\n        top: `${location.y}px`,\r\n      };\r\n    },\r\n    dragAreaOutStyle() {\r\n      const left = this.scaleNum < 0.5 ? `${300 * (1 - this.scaleNum)}` : 100;\r\n      const top = this.scaleNum < 0.5 ? `${340 * (1 - this.scaleNum)}` : 100;\r\n      return `\r\n        width: ${this.scaleNum * 1920 + 2 * left}px;\r\n        height: ${this.scaleNum * 1080 + 2 * top}px;\r\n      `;\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      rightContextConfig: {\r\n        showRightContextId: '',\r\n        location: {\r\n          x: 0,\r\n          y: 0,\r\n        },\r\n      },\r\n      showRefrenceList: {\r\n        x: [],\r\n        y: [],\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    this.$refs.dragArea.addEventListener('click', (e) => {\r\n      e.stopPropagation();\r\n      const c = e.target.getAttribute('class');\r\n      if (c === 'dragArea') {\r\n        this.editorLayout.forEach((element) => {\r\n          // eslint-disable-next-line no-param-reassign\r\n          element.active = false;\r\n        });\r\n      }\r\n    });\r\n  },\r\n  methods: {\r\n    addComponent(e) {\r\n      const componentName = e.dataTransfer.getData('componentId');\r\n      const { offsetX, offsetY } = e;\r\n      this.$store.dispatch('handleAddComponent', {\r\n        componentName,\r\n        x: offsetX,\r\n        y: offsetY,\r\n      });\r\n      console.log(editorLayout)\r\n    },\r\n    onActivated(e) {\r\n      this.editorLayout.forEach((element) => {\r\n        const { id } = element;\r\n        if (id === e.id) {\r\n          // eslint-disable-next-line no-param-reassign\r\n          element.active = true;\r\n        } else {\r\n          // eslint-disable-next-line no-param-reassign\r\n          element.active = false;\r\n        }\r\n      });\r\n      e.active = true;\r\n    },\r\n    onDeactivated(e) {\r\n      console.log(e);\r\n    },\r\n    stopDrag() {\r\n      this.showRefrenceList = {\r\n        x: [],\r\n        y: [],\r\n      };\r\n    },\r\n    handleDrag(e, x, y) {\r\n      let finalX = x;\r\n      let finalY = y;\r\n      const showXList = [];\r\n      const showYList = [];\r\n      const getRefrenceLines = (item) => {\r\n        let curX = [];\r\n        let curY = [];\r\n        for (let i = 0; i < this.editorLayout.length; i += 1) {\r\n          if (item.id === this.editorLayout[i].id) {\r\n            // eslint-disable-next-line no-continue\r\n            continue;\r\n          }\r\n          const {\r\n            x: X, y: Y, width, height,\r\n          } = this.editorLayout[i];\r\n          curX = curX.concat(X, X + width);\r\n          curY = curY.concat(Y, Y + height);\r\n        }\r\n        return {\r\n          x: [960, ...curX],\r\n          y: [540, ...curY],\r\n        };\r\n      };\r\n      const currentRefrenceList = getRefrenceLines(e);\r\n      for (let i = 0; i < currentRefrenceList.x.length; i += 1) {\r\n        const cur = currentRefrenceList.x[i];\r\n        if (finalX === cur) {\r\n          return;\r\n        }\r\n        if (Math.abs(finalX - cur) <= 30) {\r\n          // const dom = document.getElementById(`${e.id}`);\r\n          // console.log(dom.style);\r\n          // dom.style.transform = `translate(${cur}px, ${y}px)`;\r\n          showXList.push(cur);\r\n          finalX = cur;\r\n        }\r\n      }\r\n      for (let i = 0; i < currentRefrenceList.y.length; i += 1) {\r\n        const cur = currentRefrenceList.y[i];\r\n        if (finalY === cur) {\r\n          return;\r\n        }\r\n        if (Math.abs(finalY - cur) <= 30) {\r\n          showYList.push(cur);\r\n          finalY = cur;\r\n        }\r\n      }\r\n      this.showRefrenceList = {\r\n        x: showXList,\r\n        y: showYList,\r\n      };\r\n      for (let i = 0; i < this.editorLayout.length; i += 1) {\r\n        const element = this.editorLayout[i];\r\n        const { id } = element;\r\n        if (id === e.id) {\r\n          element.x = finalX;\r\n          element.y = finalY;\r\n        }\r\n      }\r\n    },\r\n    handleResize(e, x, y, w, h) {\r\n      for (let i = 0; i < this.editorLayout.length; i += 1) {\r\n        const element = this.editorLayout[i];\r\n        const { id } = element;\r\n        if (id === e.id) {\r\n          element.x = x;\r\n          element.y = y;\r\n          element.width = w;\r\n          element.height = h;\r\n        }\r\n      }\r\n    },\r\n    handleShowRightBar(e, item) {\r\n      const { offsetX, offsetY } = e;\r\n      const { id, x, y } = item;\r\n      this.rightContextConfig = {\r\n        showRightContextId: id,\r\n        location: {\r\n          x: offsetX + x,\r\n          y: offsetY + y,\r\n        },\r\n      };\r\n    },\r\n    clearListener() {\r\n      this.rightContextConfig.showRightContextId = '';\r\n    },\r\n    handleDeleteCompoent() {\r\n      const { showRightContextId } = this.rightContextConfig;\r\n      if (!showRightContextId) {\r\n        return;\r\n      }\r\n      this.$store.dispatch('handleDeleteCompoent', { id: showRightContextId });\r\n      if (this.editorLayout.length > 0) {\r\n        this.editorLayout[this.editorLayout.length - 1].active = true;\r\n      }\r\n    },\r\n    handleCopyCompoent() {\r\n      const { showRightContextId } = this.rightContextConfig;\r\n      if (!showRightContextId) {\r\n        return;\r\n      }\r\n      this.$store.dispatch('handleCopyCompoent', { id: showRightContextId });\r\n      if (this.editorLayout.length > 0) {\r\n        this.editorLayout[this.editorLayout.length - 1].active = true;\r\n      }\r\n    },\r\n    handleTopCompoent() {\r\n      const { showRightContextId } = this.rightContextConfig;\r\n      if (!showRightContextId) {\r\n        return;\r\n      }\r\n      this.$store.dispatch('handleTopCompoent', { id: showRightContextId });\r\n    },\r\n    handleBottomCompoent() {\r\n      const { showRightContextId } = this.rightContextConfig;\r\n      if (!showRightContextId) {\r\n        return;\r\n      }\r\n      this.$store.dispatch('handleBottomCompoent', { id: showRightContextId });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.dragArea {\r\n  width: 1920px;\r\n  height: 1080px;\r\n  background: rgba(255, 255, 255, 0.747);\r\n  position: relative;\r\n  transform-origin: 0px 0px;\r\n  transition: all 0.2s ease 0s;\r\n  .resize-box-class {\r\n    border: 1px solid transparent;\r\n  }\r\n  .active {\r\n    border: 1px solid #000;\r\n  }\r\n  .resize {\r\n    border: 1px solid transparent;\r\n    cursor: move;\r\n  }\r\n  .active-resize {\r\n    border: 1px solid #000;\r\n  }\r\n  .horizontal-refrence {\r\n    width: 100%;\r\n    height: 1px;\r\n    background-color: rgba(255, 0, 0, 0.5);\r\n    position: absolute;\r\n  }\r\n  .vertical-refrence {\r\n    height: 100%;\r\n    width: 1px;\r\n    background-color: rgba(255, 0, 0, 0.5);\r\n    position: absolute;\r\n  }\r\n}\r\n</style>\r\n"]}]}